<!-- Navigation Bar -->
<nav class="navbar ms-navbar">
    <div class="ms-aside-toggler ms-toggler pl-0" id="ms-sidebar-toggle" aria-controls="ms-side-nav" aria-expanded="true" style="padding-left:6px;padding-right:6px;">
        <button type="button" class="hamburger-btn" aria-label="Toggle sidebar">
            <span class="ms-toggler-bar bg-white"></span>
            <span class="ms-toggler-bar bg-white"></span>
            <span class="ms-toggler-bar bg-white"></span>
        </button>
    </div>
    <!-- Page title shown next to hamburger -->
    <div id="ms-page-title" class="ms-navbar-title text-white" aria-live="polite" style="margin-left:6px;font-size:18px;font-weight:500;">
        <!-- filled dynamically -->
    </div>
    <div class="logo-sn logo-sm ms-d-block-sm">
        <a class="pl-0 ml-0 text-center navbar-brand mr-0" href="index.html"><img src="~/assets_admin/img/medjestic-logo-84x41.png" alt="logo"> </a>
    </div>
    <ul class="ms-nav-list ms-inline mb-0" id="ms-nav-options">

        <li class="ms-nav-item  ms-d-none">
            <a href="#mymodal" class="text-white" data-toggle="modal"><i class="flaticon-spreadsheet mr-2"></i> Make an appointment</a>
        </li>

        <li class="ms-nav-item ms-d-none">
            <a href="#prescription" class="text-white" data-toggle="modal"><i class="flaticon-pencil mr-2"></i> Write a prescription</a>
        </li>

        <li class="ms-nav-item ms-d-none">
            <a href="#report1" class="text-white" data-toggle="modal"><i class="flaticon-list mr-2"></i> Generate Report</a>
        </li>

        <li class="ms-nav-item dropdown">
            <a href="#" class="text-disabled ms-has-notification" id="notificationDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="flaticon-bell"></i></a>
            <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="notificationDropdown">
                <li class="dropdown-menu-header">
                    <h6 class="dropdown-header ms-inline m-0"><span class="text-disabled">Notifications</span></h6>
                    <span class="badge badge-pill badge-info">4 New</span>
                </li>
                <li class="dropdown-divider"></li>
                <li class="ms-scrollable ms-dropdown-list">
                    <a class="media p-2" href="#">
                        <div class="media-body">
                            <span>12 ways to improve your crypto dashboard</span>
                            <p class="fs-10 my-1 text-disabled"><i class="material-icons">access_time</i> 30 seconds ago</p>
                        </div>
                    </a>
                    <a class="media p-2" href="#">
                        <div class="media-body">
                            <span>You have newly registered users</span>
                            <p class="fs-10 my-1 text-disabled"><i class="material-icons">access_time</i> 45 minutes ago</p>
                        </div>
                    </a>
                    <a class="media p-2" href="#">
                        <div class="media-body">
                            <span>Your account was logged in from an unauthorized IP</span>
                            <p class="fs-10 my-1 text-disabled"><i class="material-icons">access_time</i> 2 hours ago</p>
                        </div>
                    </a>
                    <a class="media p-2" href="#">
                        <div class="media-body">
                            <span>An application form has been submitted</span>
                            <p class="fs-10 my-1 text-disabled"><i class="material-icons">access_time</i> 1 day ago</p>
                        </div>
                    </a>
                </li>
                <li class="dropdown-divider"></li>
                <li class="dropdown-menu-footer text-center">
                    <a href="#">View all Notifications</a>
                </li>
            </ul>
        </li>
        <li class="ms-nav-item ms-nav-user dropdown">
            <a href="#" id="userDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <img class="ms-user-img ms-img-round float-right" src="~/assets_admin/img/dashboard/doctor-3.jpg" alt="people"> </a>
            <ul class="dropdown-menu dropdown-menu-right user-dropdown" aria-labelledby="userDropdown">
                <li class="dropdown-menu-header">
                    <h6 class="dropdown-header ms-inline m-0"><span class="text-disabled">Welcome, Dr Samuel Deo</span></h6>
                </li>
                <li class="dropdown-divider"></li>
                <li class="ms-dropdown-list">
                    <a class="media fs-14 p-2" href="pages/prebuilt-pages/user-profile.html"> <span><i class="flaticon-user mr-2"></i> Profile</span> </a>
                    <a class="media fs-14 p-2" href="pages/apps/email.html"> <span><i class="flaticon-mail mr-2"></i> Inbox</span> <span class="badge badge-pill badge-info">3</span> </a>
                    <a class="media fs-14 p-2" href="pages/prebuilt-pages/user-profile.html"> <span><i class="flaticon-gear mr-2"></i> Account Settings</span> </a>
                </li>
                <li class="dropdown-divider"></li>
                <li class="dropdown-menu-footer">
                    <a class="media fs-14 p-2" href="pages/prebuilt-pages/lock-screen.html"> <span><i class="flaticon-security mr-2"></i> Lock</span> </a>
                </li>
                <li class="dropdown-menu-footer">
                    <a class="media fs-14 p-2" href="pages/prebuilt-pages/default-login.html"> <span><i class="flaticon-shut-down mr-2"></i> Logout</span> </a>
                </li>
            </ul>
        </li>
    </ul>
    <div class="ms-toggler ms-d-block-sm pr-0 ms-nav-toggler" data-toggle="slideDown" data-target="#ms-nav-options">
        <span class="ms-toggler-bar bg-white"></span>
        <span class="ms-toggler-bar bg-white"></span>
        <span class="ms-toggler-bar bg-white"></span>
    </div>
</nav>

<style>
    /* Sidebar collapse styles */
    /* When body has .sidebar-collapsed, shift sidebar left and expand content */
    #ms-side-nav {
        transition: transform 0.25s ease, width 0.25s ease;
    }

    body.sidebar-collapsed #ms-side-nav {
        transform: translateX(-100%);
        /* keep it out of flow */
    }

    /* Adjust main content when sidebar collapsed - target common wrapper selectors used in layout */
    /* high specificity to override theme's left margin for content */
    body.sidebar-collapsed .ms-content-wrapper,
    body.sidebar-collapsed main.body-content .ms-content-wrapper,
    body.sidebar-collapsed .content-area,
    body.sidebar-collapsed .page-content {
        transition: margin 0.25s ease, width 0.25s ease;
        margin-left: 0 !important;
        padding-left: 20px !important; /* keep small padding so content doesn't touch edge */
        width: 100% !important;
    }

    /* Smaller screens: make toggle behave as overlay */
    @@media (max-width: 768px) {
        body.sidebar-collapsed #ms-side-nav {
            transform: translateX(-110%);
        }
    }

    .ms-navbar{ display: flex; align-items: center; justify-content: flex-start; }

    /* push primary nav options to the far right */
    .ms-navbar .ms-nav-list { margin-left: auto; }

    .hamburger-btn{
        background: transparent;
        border: none;
        cursor: pointer;
        padding: 6px 8px;
    }
    .hamburger-btn:focus{outline:none}
    /* navbar page title styling */
    .ms-navbar-title { display: inline-block; vertical-align: middle; margin-left:4px; }
</style>

<script>
    (function(){
        // Toggle sidebar collapsed class on body
        var toggle = document.getElementById('ms-sidebar-toggle');
        if(!toggle) return;

        var body = document.body;
        var pageTitleEl = document.getElementById('ms-page-title');

        // restore last state from localStorage
        try{
            if(localStorage.getItem('sidebar-collapsed') === 'true'){
                body.classList.add('sidebar-collapsed');
                // also remove the layout-open class that may reserve space
                body.classList.remove('ms-aside-left-open');
            }
        }catch(e){/* ignore */}

        toggle.addEventListener('click', function(e){
            e.preventDefault();
            var isCollapsed = body.classList.toggle('sidebar-collapsed');
            // If collapsed, remove the class that signals sidebar open to original theme CSS
            if(isCollapsed){
                body.classList.remove('ms-aside-left-open');
            } else {
                // when expanding, restore the original open class so layout returns
                body.classList.add('ms-aside-left-open');
            }
            try{ localStorage.setItem('sidebar-collapsed', isCollapsed); }catch(e){}
        });

        // Helper: set page title in navbar and optionally hide original heading
        function setNavbarTitle(text){
            if(!pageTitleEl) return;
            pageTitleEl.textContent = text || '';
        }

        // Listen to sidebar link clicks and update title
        var side = document.getElementById('ms-side-nav');
        if(side){
            side.addEventListener('click', function(ev){
                var a = ev.target.closest('a');
                if(!a) return;
                // ignore links that are toggles for collapse (have data-toggle collapse)
                if(a.getAttribute('data-toggle') === 'collapse') return;
                var text = (a.textContent || a.innerText || '').trim();
                if(text){
                    setNavbarTitle(text);
                    // hide page heading if exists
                    var pageHeading = document.getElementById('page-heading');
                    if(pageHeading) pageHeading.style.display = 'none';
                }
            });
        }

        // On load, try to initialize from existing page heading or document title
        document.addEventListener('DOMContentLoaded', function(){
            var pageHeading = document.getElementById('page-heading');
            if(pageHeading && pageHeading.textContent.trim()){
                setNavbarTitle(pageHeading.textContent.trim());
                // hide original to avoid duplication
                pageHeading.style.display = 'none';
            } else if(document.title){
                setNavbarTitle(document.title.replace('- Admin','').trim());
            }
        });

    })();
</script>